<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Depth Spacing Comparison - SplatThis</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 30px;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }

        .comparison-panel {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .panel-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            text-align: center;
            font-weight: 600;
        }

        .old-title {
            color: #ff6b6b;
        }

        .new-title {
            color: #51cf66;
        }

        .fixed-title {
            color: #74c0fc;
        }

        .svg-container {
            width: 100%;
            height: 400px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            overflow: hidden;
            background: white;
            position: relative;
        }

        .svg-container svg {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .controls {
            margin-top: 20px;
            text-align: center;
        }

        .control-group {
            margin: 10px 0;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        input[type="range"] {
            width: 200px;
            margin: 0 10px;
        }

        .value-display {
            display: inline-block;
            min-width: 40px;
            font-weight: bold;
        }

        .analysis {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .analysis h2 {
            margin-top: 0;
            color: #ffd43b;
        }

        .depth-values {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .depth-column {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 8px;
        }

        .depth-column h3 {
            margin-top: 0;
            text-align: center;
        }

        .depth-list {
            list-style: none;
            padding: 0;
        }

        .depth-list li {
            padding: 8px;
            margin: 5px 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            font-family: 'Monaco', 'Menlo', monospace;
        }

        .instructions {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 4px solid #ffd43b;
        }

        .problem-highlight {
            background: rgba(255, 107, 107, 0.2);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ff6b6b;
            margin: 15px 0;
        }

        .solution-highlight {
            background: rgba(81, 207, 102, 0.2);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #51cf66;
            margin: 15px 0;
        }

        @media (max-width: 1200px) {
            .comparison-grid {
                grid-template-columns: 1fr;
            }

            .depth-values {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé® Depth Spacing Comparison</h1>
            <div class="subtitle">
                Fixing parallax gaps with improved depth layer spacing
            </div>
        </div>

        <div class="instructions">
            <h3>üéØ Problem & Solution</h3>
            <div class="problem-highlight">
                <strong>Root Problem:</strong> Parallax gaps are caused by splats being too small (k=2.5) rather than depth spacing. When layers translate during parallax motion, gaps between small splats become visible as holes.
            </div>
            <div class="solution-highlight">
                <strong>Real Solution:</strong> Increase splat size multiplier to k=4.5 (nearly double the radius) to ensure overlapping coverage during parallax motion. Depth spacing adjustments help but don't solve the core issue.
            </div>
            <p><strong>Instructions:</strong> Move your mouse over each SVG to see the parallax effect. Notice how only the larger splats (k=4.5) eliminate gaps, while depth spacing alone doesn't fix the problem.</p>
        </div>

        <div class="comparison-grid">
            <div class="comparison-panel">
                <div class="panel-title old-title">‚ùå Old Linear Spacing</div>
                <div class="svg-container" id="old-container">
                    <object data="old_depth_spacing.svg" type="image/svg+xml" width="100%" height="100%"></object>
                </div>
                <div class="controls">
                    <div class="control-group">
                        <label>Parallax Sensitivity</label>
                        <input type="range" id="old-sensitivity" min="0.1" max="2.0" step="0.1" value="1.0">
                        <span class="value-display" id="old-sensitivity-value">1.0</span>
                    </div>
                </div>
            </div>

            <div class="comparison-panel">
                <div class="panel-title new-title">‚úÖ Improved Depth Spacing</div>
                <div class="svg-container" id="new-container">
                    <object data="improved_depth.svg" type="image/svg+xml" width="100%" height="100%"></object>
                </div>
                <div class="controls">
                    <div class="control-group">
                        <label>Parallax Sensitivity</label>
                        <input type="range" id="new-sensitivity" min="0.1" max="2.0" step="0.1" value="1.0">
                        <span class="value-display" id="new-sensitivity-value">1.0</span>
                    </div>
                </div>
            </div>

            <div class="comparison-panel">
                <div class="panel-title fixed-title">üéØ Larger Splats (k=4.5)</div>
                <div class="svg-container" id="fixed-container">
                    <object data="larger_splats_test.svg" type="image/svg+xml" width="100%" height="100%"></object>
                </div>
                <div class="controls">
                    <div class="control-group">
                        <label>Parallax Sensitivity</label>
                        <input type="range" id="fixed-sensitivity" min="0.1" max="2.0" step="0.1" value="1.0">
                        <span class="value-display" id="fixed-sensitivity-value">1.0</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="analysis">
            <h2>üìä Technical Analysis</h2>

            <div class="depth-values">
                <div class="depth-column">
                    <h3 class="old-title">‚ùå Small Splats (k=2.5)</h3>
                    <ul class="depth-list">
                        <li>Splat radius: ~13-15px</li>
                        <li>Depth: 0.2, 0.467, 0.733, 1.0</li>
                        <li>Coverage: Poor</li>
                        <li>Gaps: Highly visible</li>
                    </ul>
                    <p><strong>Problems:</strong></p>
                    <ul>
                        <li>Splats too small for parallax motion</li>
                        <li>17+ pixel gaps between splats</li>
                        <li>Layer translation exposes holes</li>
                        <li>Depth spacing irrelevant</li>
                    </ul>
                </div>

                <div class="depth-column">
                    <h3 class="new-title">‚ö†Ô∏è Improved Depth Only</h3>
                    <ul class="depth-list">
                        <li>Splat radius: ~13-15px (same)</li>
                        <li>Depth: 0.450, 0.515, 0.620, 0.735</li>
                        <li>Coverage: Still poor</li>
                        <li>Gaps: Still visible</li>
                    </ul>
                    <p><strong>Limited Impact:</strong></p>
                    <ul>
                        <li>Closer depth spacing</li>
                        <li>Scale factors up to 1.4x</li>
                        <li>Splats still fundamentally too small</li>
                        <li>Gaps remain during motion</li>
                    </ul>
                </div>

                <div class="depth-column">
                    <h3 class="fixed-title">‚úÖ Larger Splats (k=4.5)</h3>
                    <ul class="depth-list">
                        <li>Splat radius: ~24-27px</li>
                        <li>Depth: 0.450, 0.515, 0.620, 0.735</li>
                        <li>Coverage: Excellent</li>
                        <li>Gaps: Eliminated</li>
                    </ul>
                    <p><strong>Real Solution:</strong></p>
                    <ul>
                        <li>80% larger splat radii</li>
                        <li>Overlapping coverage maintained</li>
                        <li>Seamless parallax motion</li>
                        <li>Proper gap elimination</li>
                    </ul>
                </div>
            </div>

            <h3>üîß Implementation Details</h3>
            <p>The improved depth spacing uses a non-linear distribution that:</p>
            <ul>
                <li><strong>Clusters layers near 0.6:</strong> Reduces the visible separation during parallax motion</li>
                <li><strong>Applies scale factors:</strong> Background layers get up to 40% larger splats for better coverage</li>
                <li><strong>Maintains smooth transitions:</strong> Preserves the depth illusion while eliminating gaps</li>
                <li><strong>Optimizes for perception:</strong> Smaller depth differences are less noticeable to the human eye</li>
            </ul>

            <h3>üéØ Visual Impact</h3>
            <p>The old linear spacing created a poor user experience where mouse movement revealed the "layer sandwich" structure. The improved spacing maintains the parallax effect while preserving the illusion of a continuous 3D surface.</p>
        </div>
    </div>

    <script>
        // Update sensitivity value displays
        function updateSensitivityDisplay(sliderId, displayId) {
            const slider = document.getElementById(sliderId);
            const display = document.getElementById(displayId);
            display.textContent = slider.value;

            slider.oninput = function() {
                display.textContent = this.value;
                // Note: Actual parallax sensitivity control would require
                // communication with the SVG's JavaScript if implemented
            };
        }

        updateSensitivityDisplay('old-sensitivity', 'old-sensitivity-value');
        updateSensitivityDisplay('new-sensitivity', 'new-sensitivity-value');
        updateSensitivityDisplay('fixed-sensitivity', 'fixed-sensitivity-value');

        // Add loading indicators and error handling
        document.addEventListener('DOMContentLoaded', function() {
            const objects = document.querySelectorAll('object');
            objects.forEach(obj => {
                obj.onload = function() {
                    console.log('SVG loaded successfully');
                };
                obj.onerror = function() {
                    console.error('Failed to load SVG:', obj.data);
                    obj.style.display = 'none';
                    const container = obj.parentElement;
                    const errorMsg = document.createElement('div');
                    errorMsg.innerHTML = '<p style="text-align: center; padding: 20px; color: #ff6b6b;">‚ö†Ô∏è Failed to load SVG file</p>';
                    container.appendChild(errorMsg);
                };
            });
        });
    </script>
</body>
</html>